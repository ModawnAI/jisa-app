# JISA 챗봇 요금제 모델

**작성일**: 2025-11-17
**상태**: 확정

---

## 비즈니스 모델 개요

JISA는 **B2B SaaS 모델**로 운영되며, 기업당 사용자 수에 따라 월간 구독료를 청구합니다.

### 핵심 원칙

1. **단일 요금**: 모든 사용자는 동일한 가격으로 청구됨
2. **동일 기능**: 모든 티어가 동일한 기능과 혜택을 제공받음
3. **티어 = 지식 접근 레벨**: 티어는 기능 차이가 아닌 RBAC 콘텐츠 필터링 레벨
4. **사용자당 과금**: 월간 청구 = 활성 사용자 수 × 사용자당 가격

---

## 요금 구조

### Per-Seat 가격 (예시)

```
월간 사용자당 가격: ₩30,000/사용자

예시 청구액:
- 10명 사용: ₩300,000/월
- 50명 사용: ₩1,500,000/월
- 100명 사용: ₩3,000,000/월
```

### 청구 방식

- **월간 구독**: 매월 자동 청구
- **활성 사용자 기준**: 해당월 1회 이상 시스템 사용한 사용자 수
- **유연한 조정**: 월별로 사용자 추가/제거 가능
- **최소 계약**: 최소 5명 이상

---

## 티어 시스템 (지식 접근 레벨)

티어는 **요금 차이가 아닌** 사용자의 **지식 접근 권한**을 정의합니다.

### 4가지 지식 접근 티어

| 티어 | 설명 | 접근 가능한 콘텐츠 | 요금 |
|------|------|-------------------|------|
| **무료** | 기본 공개 정보 | 공개 정책, 기본 상품 정보 | 동일 |
| **베이직** | 일반 직원 | 무료 + 내부 절차, 일반 교육 자료 | 동일 |
| **프로** | 전문가 | 베이직 + 전문 분석, 고급 교육 | 동일 |
| **엔터프라이즈** | 관리자/임원 | 프로 + 경영 정보, 민감 데이터 | 동일 |

### 중요 사항

- **모든 티어 동일 요금**: 무료 티어 사용자도 엔터프라이즈 티어 사용자와 동일한 ₩30,000/월
- **티어는 역할과 독립적**: CEO가 무료 티어일 수도 있고, 주니어가 엔터프라이즈 티어일 수도 있음
- **회사가 결정**: 각 직원에게 어느 티어를 부여할지는 회사가 결정

---

## 역할 시스템 (기능 접근 권한)

역할은 **시스템 기능 접근 권한**을 정의합니다. (티어와 별개)

### 6가지 역할

| 역할 | 설명 | 시스템 권한 |
|------|------|------------|
| **사용자** | 일반 사용자 | 기본 쿼리, 채팅 |
| **주니어** | 초급 직원 | 사용자 + 기본 대시보드 |
| **시니어** | 중급 직원 | 주니어 + 고급 검색 |
| **관리자** | 팀 관리자 | 시니어 + 팀 관리 |
| **총괄 관리자** | 부서 관리자 | 관리자 + 부서 관리, 사용자 관리 |
| **대표이사** | 최고 경영자 | 모든 권한 + 시스템 설정 |

### 역할과 티어의 조합 예시

```
예시 1: 영업 팀장
- 역할: 관리자 (팀 관리 기능 필요)
- 티어: 프로 (영업 전문 지식 필요)

예시 2: 신입 사원
- 역할: 주니어 (기본 기능만)
- 티어: 베이직 (기본 내부 정보)

예시 3: CEO
- 역할: 대표이사 (모든 시스템 권한)
- 티어: 엔터프라이즈 (모든 지식 접근)
```

---

## 인증 코드 생성 시 티어 설정 가이드

### 티어 선택 기준

관리자가 인증 코드 생성 시 고려해야 할 사항:

1. **직무 필요성**
   - 어떤 수준의 정보가 필요한가?
   - 민감한 경영 정보 접근이 필요한가?

2. **부서별 기준**
   - 영업팀: 프로 (상품 상세 정보 필요)
   - 경영지원팀: 엔터프라이즈 (경영 데이터 필요)
   - 일반 직원: 베이직 (기본 절차 정보)

3. **직급과 무관**
   - 티어는 직급이 아닌 **정보 필요도**로 결정
   - 주니어 직원도 업무상 프로 티어가 필요할 수 있음

### 티어 변경

- **유연한 변경**: 필요시 언제든 티어 변경 가능
- **요금 불변**: 티어 변경해도 사용자당 요금은 동일
- **즉시 적용**: 변경 즉시 접근 권한 업데이트

---

## 청구 및 결제

### 청구 프로세스

1. **월말 집계**: 매월 말일 기준 활성 사용자 수 집계
2. **청구서 발행**: 다음 달 1일 청구서 발행
3. **결제**: 기업 계정으로 자동 결제
4. **영수증**: 이메일로 영수증 발송

### 활성 사용자 정의

- **활성**: 해당월 1회 이상 챗봇 쿼리 실행
- **비활성**: 전혀 사용하지 않은 계정 (청구 제외)
- **휴면**: 30일 이상 미사용 (청구 제외 가능)

### 할인 정책

```
사용자 수 기반 볼륨 할인:
- 10-49명: 정가
- 50-99명: 5% 할인
- 100-199명: 10% 할인
- 200명 이상: 15% 할인 (협의 가능)
```

---

## 시스템 구현

### 데이터베이스 스키마

```sql
-- profiles 테이블
role: TEXT                    -- 역할: user, junior, senior, manager, admin, ceo
subscription_tier: TEXT       -- 티어: free, basic, pro, enterprise (지식 접근 레벨)
is_active: BOOLEAN           -- 활성 여부
created_at: TIMESTAMPTZ      -- 생성일
last_chat_at: TIMESTAMPTZ    -- 마지막 채팅 시간 (청구 집계용)
```

### RBAC 필터링

```typescript
// 티어 기반 콘텐츠 필터링
const tierHierarchy = {
  enterprise: ['enterprise', 'pro', 'basic', 'free'],  // 모든 콘텐츠 접근
  pro: ['pro', 'basic', 'free'],                        // 프로급 이하 접근
  basic: ['basic', 'free'],                             // 기본급 이하 접근
  free: ['free']                                        // 공개 정보만 접근
}

// Pinecone 쿼리 시
filter: {
  access_tiers: { $in: tierHierarchy[userTier] }
}
```

### 청구 집계 쿼리

```sql
-- 월간 활성 사용자 수 집계
SELECT COUNT(DISTINCT id) as active_users
FROM profiles
WHERE
  last_chat_at >= DATE_TRUNC('month', NOW())
  AND last_chat_at < DATE_TRUNC('month', NOW()) + INTERVAL '1 month'
  AND is_active = true;
```

---

## UI/UX 고려사항

### 코드 생성 페이지

현재 UI 개선 필요:

**변경 전 (혼란스러움)**:
```
구독 티어: [무료 v] [베이직] [프로] [엔터프라이즈]
→ 사용자가 "티어가 높을수록 비싼가?" 오해 가능
```

**변경 후 (명확함)**:
```
지식 접근 레벨: [무료 v] [베이직] [프로] [엔터프라이즈]
ⓘ 모든 레벨 동일 요금 (₩30,000/월/사용자)
ⓘ 레벨은 접근 가능한 정보의 범위를 결정합니다
```

### 설명 문구 추가

각 페이지에 명확한 안내:

```
[인증 코드 생성]

지식 접근 레벨 선택
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
이 설정은 사용자가 접근할 수 있는 정보의 범위를 결정합니다.
모든 레벨의 사용자는 동일한 요금(₩30,000/월)으로 청구됩니다.

○ 무료: 공개 정책 및 기본 상품 정보
○ 베이직: 내부 절차, 일반 교육 자료
○ 프로: 전문 분석, 고급 교육 자료
○ 엔터프라이즈: 경영 정보, 민감 데이터

직원의 직무에 필요한 정보 수준을 선택하세요.
```

---

## 마케팅 메시지

### 고객 대상 설명

```
JISA 챗봇 - 단순하고 공정한 요금제

✓ 사용자당 ₩30,000/월
✓ 모든 사용자 동일한 가격
✓ 직원별 맞춤 정보 접근 레벨
✓ 월별 유연한 사용자 조정

예시:
50명 회사 → ₩1,500,000/월
직급이나 정보 접근 레벨과 무관하게
모든 직원에게 동일한 요금이 적용됩니다.
```

---

## 향후 고려사항

### 추가 가능한 기능

1. **연간 계약 할인**: 12개월 선결제 시 2개월 무료
2. **시즌 할인**: 신규 고객 첫 3개월 20% 할인
3. **추천 프로그램**: 다른 기업 추천 시 양사 1개월 할인
4. **최소 계약 기간**: 없음 (월간 구독, 언제든 해지 가능)

### 비용 절감 팁

기업에게 제공할 조언:

1. **비활성 계정 관리**: 퇴사자 계정 즉시 비활성화
2. **최적 티어 배정**: 과도한 엔터프라이즈 티어 배정 지양
3. **계절성 고려**: 성수기/비수기 사용자 조정
4. **교육 강화**: 효율적 사용으로 사용자 수 최적화

---

## 경쟁사 대비 장점

### 경쟁사 A (단계별 요금제)

```
경쟁사:
- 베이직 ₩20,000/월 (제한된 기능)
- 프로 ₩40,000/월 (고급 기능)
- 엔터프라이즈 ₩80,000/월 (모든 기능)

문제점:
- 직원마다 다른 요금
- 복잡한 청구
- 불공평한 대우
```

### JISA (단일 요금제)

```
JISA:
- 모든 사용자 ₩30,000/월 (동일 기능)
- 간단한 청구
- 공평한 대우
- 정보 접근만 차별화
```

---

## 문서 끝

**참고 문서**:
- [KAKAO_APP_FLOW_TRACKING.md](./KAKAO_APP_FLOW_TRACKING.md)
- [KAKAO_SETUP.md](./KAKAO_SETUP.md)
- [RBAC Service](./lib/services/rbac.service.ts)
